<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Interop Admin — Test Runner</title>
    <style>
      body { font-family: Arial, Helvetica, sans-serif; padding: 1rem; }
      button { padding: .5rem 1rem; font-size: 1rem }
      pre { background: #f5f5f5; padding: .5rem; overflow:auto }
    </style>
  </head>
  <body>
    <h1>Interop Admin — Integration Tests</h1>
    <p>Run the integration test suite against services in the compose network.</p>
    <button id="run">Run tests</button>
    <div id="out"></div>

    <script>
      const out = document.getElementById('out');
      document.getElementById('run').addEventListener('click', async () => {
        out.innerHTML = '<p>Running tests…</p>';
        try {
          const r = await fetch('/api/run-tests');
          const json = await r.json();
          if (!json.ok) {
            out.innerHTML = '<pre>ERROR: ' + JSON.stringify(json, null, 2) + '</pre>';
            return;
          }
          out.innerHTML = '<pre>' + JSON.stringify(json.results, null, 2) + '</pre>';
        } catch (e) {
          out.innerHTML = '<pre>Request failed: ' + e.message + '</pre>';
        }
      });
    </script>
  </body>
</html>
